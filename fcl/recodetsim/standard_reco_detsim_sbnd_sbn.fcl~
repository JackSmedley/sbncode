#include "detsimmodules_sbnd.fcl"
#include "crtsimmodules_sbnd.fcl"
#include "simulationservices_sbnd.fcl"
#include "reco_base.fcl"
#include "standard_reco_sbnd_basic.fcl"

process_name: Reco

services:
{
  @table::sbnd_detsim_services
  FileCatalogMetadata: @local::sbnd_file_catalog_mc
  AuxDetExptGeoHelperInterface: { service_provider: "sbndcode/CRT/CRTGeometryHelper" }
  AuxDetGeometry: { @table::sbnd_geo_source }
  TFileService:              { fileName: @local::sbnd_tfileoutput.fileName }
  message:                   @local::sbnd_message_services_prod # from messages_sbnd.fcl
  FileCatalogMetadata:       @local::sbnd_file_catalog_mc       # from sam_sbnd.fcl
                             @table::sbnd_services              # from services_sbnd.fcl
                             @table::sbnd_random_services       # from services_sbnd.fcl; required by fuzzyCluster
  LArFFT:                    @local::sbnd_larfft
  SignalShapingServiceSBND: @local::sbnd_signalshapingservice  # from signalservices_sbnd.fcl

  #Legacy code in EMSHOWER uses the backtracker to be removed after the SBN Workshop March 2018 
  BackTrackerService:  @local::standard_backtrackerservice 
  ParticleInventoryService: @local::standard_particleinventoryservice

}

physics.producers.daq:       @local::sbnd_simwire

physics.producers.TrackCaloUboonetune.CalorimetryAlg: @local::sbnd_calorimetryalgmc
physics.producers.TrackCalo.CalorimetryAlg: @local::sbnd_calorimetryalgmc

physics.producers.linecluster: @local::sbn_linecluster
physics.producers.linecluster.HitFinderModuleLabel:              "gaushit"

physics.producers.pandora:           @local::sbn_pandora
physics.producers.pandoraUboonetune: @local::sbn_pandora
physics.producers.pandoraUboonetune.ConfigFile: "PandoraSettings_Master_SBN.xml"
physics.producers.pandora.HitFinderModuleLabel:            "linecluster"
physics.producers.pandoraUboonetune.HitFinderModuleLabel:  "linecluster"
physics.producers.pandora.ConfigFile: "PandoraSettings_Master_Standard.xml"

physics.producers.pandoraTrack:            @local::sbn_pandoraTrackCreation
physics.producers.pandoraTrackUboonetune:  @local::sbn_pandoraTrackCreation
physics.producers.pandoraTrackUboonetune.PFParticleLabel: pandoraUboonetune

physics.producers.TrackCalo:           @local::sbn_calo
physics.producers.TrackCaloUboonetune: @local::sbn_calo
physics.producers.TrackCaloUboonetune.TrackModuleLabel:      "pandoraTrackUboonetune"
physics.producers.TrackCaloUboonetune.SpacePointModuleLabel: "pandoraUboonetune" 

physics.producers.TrackPid:           @local::sbn_chi2pid
physics.producers.TrackPidUboonetune: @local::sbn_chi2pid
physics.producers.TrackPidUboonetune.TrackModuleLabel:       "pandoraTrackUboonetune"
physics.producers.TrackPidUboonetune.CalorimetryModuleLabel: "TrackCaloUboonetune"

physics.producers.tracs:           @local::sbn_tracs_shower
physics.producers.tracsUboonetune: @local::sbn_tracs_shower
physics.producers.tracsUboonetune.PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[0].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[1].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[2].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[3].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[4].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[5].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[6].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[7].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[8].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[9].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[10].PFParticleModuleLabel: "pandoraUboonetune"
physics.producers.tracsUboonetune.ShowerFinderTools[11].PFParticleModuleLabel: "pandoraUboonetune"

physics.producers.tracs.ShowerFinderTools[4].CalorimetryAlg: @local::sbnd_calorimetryalgmc
physics.producers.tracs.ShowerFinderTools[6].CalorimetryAlg: @local::sbnd_calorimetryalgmc

physics.producers.tracs.ShowerFinderTools[2].Gradients: [0.00155644,0.00173915,0.00153631]
physics.producers.tracs.ShowerFinderTools[2].Intercepts: [5.92931, -2.13307, 5.19711]

physics.producers.tracsUboonetune.ShowerFinderTools[4].CalorimetryAlg: @local::sbnd_calorimetryalgmc
physics.producers.tracsUboonetune.ShowerFinderTools[6].CalorimetryAlg: @local::sbnd_calorimetryalgmc

physics.producers.tracsUboonetune.ShowerFinderTools[2].Gradients: [0.00155644,0.00173915,0.00153631]
physics.producers.tracsUboonetune.ShowerFinderTools[2].Intercepts: [5.92931, -2.13307, 5.19711]


physics.producers.rns: {
    module_type: "RandomNumberSaver"
    }


physics.reco: [ rns
                ,daq
                ,caldata 
                ,gaushit
                ,linecluster
                ,pandora, pandoraTrack
                ,pandoraUboonetune, pandoraTrackUboonetune
                ,TrackCalo, TrackPid
                ,TrackCaloUboonetune, TrackPidUboonetune
                ,tracs
                ,tracsUboonetune
                ]

outputs.out1.fileName: "%ifb_%tc_reco.root"


outputs.out1.outputCommands: [
    "keep *",
    "drop raw::RawDigits_daq_*_*",
    "drop *_caldata_*_*"
]
